<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="nav bar.css">
  <link rel="stylesheet" href="Admin login.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <title>Upload Your Event Proposal</title>

  <script src="darkmode.js">
  </script>

</head>

<body>
  <p id="btn"></p>
  <div class="blue">
    <marquee scrollamount="8" direction="right">
      <h3>Welcome To Department Of Computer Applications</h3>
    </marquee>
  </div>

  <header>
    <ul class="nav">

      <li class="nav1">
        <a href=https://www.invertisuniversity.ac.in target="_blank">
          <img
            src="https://lh3.googleusercontent.com/pw/AM-JKLUHOoOl_CcyCl6rTFdf9OQU_HGg_EKKwAJxsy0eAHLLVpwFDakKR3cGTZ0wKmMgl5mifxB0pA2_UJeg9agW-35rAf_ELoC3u7lEOeha5azTiGwzCCuAucFKHlYyEIzMMYPRcjXF8KeD4qsMXGX99E_3=w296-h83-no?authuser=0"
            class="img" name="1">
        </a>
      </li>

      <li class="nav1" style="padding-left: 20px;">
        <a class="nav2" href="index.html"> <i class="fa fa-home"></i> Home </a>
      </li>

      <li class="nav1">
        <a class="nav2" href="course.html" target="_blank"> <i class="fa fa-graduation-cap"></i> Courses</a>
      </li>

      <li class="nav1">
        <div class="event">
          <button class="eventbtn"><i class="fa fa-calendar"></i> Event </button>
          <div class="event-content">
            <a href="Upload Your Event Proposal.html" target="_blank"> <i class="fa fa-calendar-plus-o"></i> Upload Your
              Event Proposal</a>
            <a href="Current Events Approved.html" target="_blank"> <i class="fa fa-calendar-check-o"></i> Current
              Events Approved</a>
            <a href="Event History.html" target="_blank"> <i class="fa fa-calendar"></i> Event History </a>
            <a href="Admin Login.html"> <i class="fa fa-user"></i> Admin Login </a>
            <a href="Details.html" target="_blank"> <i class="fa fa-bars"></i> More Details </a>
          </div>
        </div>
      </li>

      <li class="nav1" class="aKp aKe-aLf" style="user-select: none;">
        <!-- <div class="aKp aKe-aLf" style="user-select: none;"> -->
        <a class="nav2" href="About Developers.html" target="_blank"> <i class="fa fa-user"></i> About Developers</a>
      </li>
      <li class="nav1">
        <div class="more">
          <button class="morebtn">More
            <i class="fa fa-caret-down"></i>
          </button>
          <div class="more-content">
            <a href="Contact Us.html" target="_blank"> <i class="fa fa-address-book"></i> Contact Us</a>
            <a href="faculty.html" target="_blank"> <i class="fa fa-group"></i> Faculty</a>

            <div class="mode"> <i class="fa fa-moon-o" style="font-size:20px"></i>
              Dark mode:

              <span class="change">OFF</span>

            </div>
          </div>
        </div>
      </li>
    </ul>
  </header>
  <main>

    <form id="loginForm">
      <div class="imgcontainer">
        <img
          src="https://lh3.googleusercontent.com/pw/AM-JKLXPOJ15ANyb7x-ipXXsL_zsYCVeBLQNKjMEPS5lcZW5UjJhsmiL7aRxMwdlC-HFaH0OE1adcNsRiCbXV5HWfm52wFac92f2nnxVlfS6hMRTZC7PVPK6YhNOm1Bz1F31_kAoDKSTYV49ShuH9emeU18=w225-h224-no?authuser=0"
          alt=" " class="avatar">
      </div>

      <div class="container">
        <label><b>Username</b></label>
        <input type="text" placeholder="Enter Username" id="user" required />

        <label><b>Password</b></label>
        <input type="password" placeholder="Enter Password" id="pass" required />

        <input type="submit" value="Login">

      </div>
    </form>

    <div id="result"></div>

    <script>
      var form = document.querySelector("#loginForm")
      loginForm.onsubmit = async (e) => {
        e.preventDefault();
        data = {
          user_id: form.querySelector('input[id="user"]').value,
          password: form.querySelector('input[id="pass"]').value
        }
        let response = await fetch('http://127.0.0.1:3000/login', {
          method: 'POST', // or 'PUT'
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data),
        })
        let text = JSON.parse(await response.text()) // read response body as text
        if(text === true){
          window.location.href = "Current Events Approved.html"
        }else{
          document.querySelector("#result").innerHTML = 'EITHER USERNAME OR PASSWORD USERNAME '
          document.getElementById("loginForm").reset()
        }
      }
    </script>
    <br>
    <br>
    <br>
    <br>
  </main>

  <footer>
    &copy;
    2021
    Department of Computer Applications Invertis University

    <button id="right"><a href="#btn"><b></b>&and;</b></a></button>
  </footer>
</body>

</html>